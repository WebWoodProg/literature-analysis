[[Мартин Р. - Чистый код. Cоздание, анализ и рефакторинг - 2019.pdf]]

## Глава 1. Чистый код

### Краткое содержание:
- Пиши код правильно сразу!
	*Потом равносильно никогда.  -  закон Лебиана.*
- Программист, который подчиняется воле начальника, не понимающего опасность некачественного кода, проявляет непрофессионализм.
- Программисту необходимо развить в себе "Чувство кода" чтобы выбрать лучший вариант и спланировать последовательность преобразований, сохраняющих поведение программы и приводящих к нужному результату.
- Какой код является чистым?
	- "Эффективный" - *Бьерн Страуструп*
	- "Удобочитаемый" - *Грэди Буч*
	- "Грамотный код, упрощающий доработку другим людям." - *"Большой" Дэйв*
	- "Код над которым тщательно поработали"  -  *Майкл Физерс*
	- "Не содержит дубликатов" - *Рон Джеффрис*

## Глава 2. Содержательные имена

### Краткое содержание
- Имена должны передавать намерения программиста.
- Имя переменной, функции или класса должно отвечать на вопросы почему она существует, что делает, как используется.
- Если имя требует доп. комментариев, значит оно не передает намерений программиста.
	- *ПРИМЕР
	``` java
	if (x[0] == 4)  // плохо
	if (cell[STATUS_VALUE]==FLAGGED) // хорошо
	if (cell.isFlagged()) //лучший вариант
	```
- Избегайте дезинформации
	- *ПРИМЕР*
		не обозначайте группу учетных записей именем accountList, если только она действительно не хранится в списке List. **Лучше accountGroup или accounts**
- Остерегайтесь малозаметных различий в именах
	- *ПРИМЕР*
		XYZControllerForEfficientHandlingOfStrings
		XYZColntrollerForEfficientStorageOfStrings
- Используйте осмысленные различия в именах
	- не создавайте числовые ряды по типу a1, a2, a3, ... , aN. Они не несут информации и представления о намерениях автора.
	``` java
	public static void copyChar (char a1[], char a2[]) //плохо
	public static void copyChar (char source[], char destination[]) //хорошо	
	```
- Не используйте неинформативные слова
	- *ПРИМЕР*
		ProductInfo и ProductData по сути обозначают одно и тоже
- Используйте удобочитаемые имена
	``` java
	// плохой вариант
	class DtaRcrd102 { 
		private Date genymdhms; 
		private Date modymdhms; 
		private final String pszqint = "102"; 
		/* ... */ 
	}; 

	// хороший вариант
	class Customer { 
		private Date generationTimestamp; 
		private Date modificationTimestamp; 
		private final String recordId = "102"; 
		/* ... */ 
	};
	```
- Выбирайте имена удобные для поиска
``` java
// плохо
for (int j=0; j<34; j++) { 
	s += (t[j]*4)/5; 
} 

// хорошо
int realDaysPerIdealDay = 4; 
const int WORK_DAYS_PER_WEEK = 5; 
int sum = 0; 
for (int j=0; j < NUMBER_OF_TASKS; j++) { 
	int realTaskDays = taskEstimate[j] * realDaysPerIdealDay; 
	int realTaskWeeks = (realdays / WORK_DAYS_PER_WEEK); 
	sum += realTaskWeeks; 
}
```
- Однобуквенные имена могут использоваться только для локальных переменных в коротких методах
- Избегайте схем кодирования имен (например ранее использовался префикс m_  для переменных класса)
	  *ПРИМЕР*
	``` java
	// плохо
	IShapeFactory // интерфейс
	ShapeFactory // реализация

	// хорошо
	ShapeFactory // интерфейс
	ShapeFactoryImp // реализация
	```
- имена классов и объектов должны представлять собой существительные и их комбинации (Customer, WikiPage, ...)
- Старайтесь не использовать слова Manager, Processor, DataInfo.
- Имена методов представляют собой глаголы или глагольные сочетания (postPayment, deletePage, ...)
- При перегрузке конструкторов используйте статические методы - фабрики с именами, описывающими аргументы
``` java
Complex fulcrumPoint = Complex.FromRealNumber(23.0); 
//обычно лучше записи 
Complex fulcrumPoint = new Complex(23.0);
```
- Выберите одно слово для каждой концепции (например что то одно из Controller, Manager и Driver)
- Добавьте содержательный контекст
		*ПРИМЕР*
		firstName, lasctName, address, city, state в совокупности понятно что означают адрес, но по отдельности контекст не ясен.
		Рекомендация - создать класс Address и сделать эти данные его полями. Тогда контекст будет ясен.
- Остерегайтесь избыточного контекста
## Глава3. Функции

### Краткое содержание
- Функции должны быть максимально компактными
- Блоки в командах if, else, while и т.д. должны состоять из одной строки, в которой обычно содержится вызов функции.
- Функции не должны содержать вложенных структур. Максимальный уровень отступов не должен превышать одного-двух.
- Функция должна выполнять только одну операцию. Она должна выполнять ее хорошо и ничего другого она не должна делать. Если выполняемые действия функции находятся на одном уровне абстракции, то считается что данная функция выполняет одну операцию.
- Код должен читаться сверху вниз - за каждой функцией должны следовать функции следующего уровня абстракции
- По конструкции switch так и не понял что имел ввиду автор (читать в оригинале)
- Используйте содержательные имена (используйте в именах функций те же словосочетания, глаголы и существительные, которые используются в ваших модулях)
- Чем меньше аргументов в функции тем лучше (максимум 2)
- Не использовать в аргументах флаги, которые говорят функции что делать (true сделай одно, false сделай другое). Разбивать такие функции на две самостоятельные функции.
- Стараться не использовать функции с стремя аргументами
- В случае если функция должна принять больше двух или трех аргументов, упаковываем их в отдельный класс.
	``` java
	Circle makeCircle(double x, double y, double radius); 
	Circle makeCircle(Point center, double radius);
	```
- Если функция с одним аргументом, то она должна образовывать пару глагол/существительное
	``` java
	writeField(name)
	```
- Избавьтесь от побочных эффектов (не делать что-то побочное, скрытое от пользователя)
- Выходных аргументов функции следует избегать. Если ваша функция должна изменять чье-то состояние, пусть она изменяет состояние своего объекта-владельца.
``` java
	public void appendFooter(StringBuffer report)
	
	//лучше будет
	report.appendFooter();
```
- Функция должна что-то делать или отвечать на какой-то вопрос, но не одновременно.
- Используйте исключения вместо возвращения кодов ошибок.
- Изолируйте блоки try/catch (выделять в отдельные функции)
``` java
public void delete(Page page) { 
	try { 
		deletePageAndAllReferences(page); 
	} 
	catch (Exception e) { 
		logError(e); 
	} 
} 
private void deletePageAndAllReferences(Page page) throws Exception { 
	deletePage(page); 
	registry.deleteReference(page.name); 
	configKeys.deleteKey(page.name.makeKey()); 
} 
private void logError(Exception e) { 
	logger.log(e.getMessage()); 
}
```
- Обработка ошибок как одна операция (функция, обрабатывающая ошибки, ничего другого делать не должна)
	- если в функции присутствует ключевое слово try, то оно должно быть первым словом в функции, а после блоков catch/finally ни- чего другого быть не должно (как в предыдущем примере)
- Не старайтесь сразу написать все функции по всем правилам, вероятнее всего у вас это не получится. "Причесывайте" код после его написания.
